<div class="container my-5 py-5">
  <div class="row">
    <div class="col-md-7 col-12 d-flex align-items-center img-container">
      <img
        src="/images/signin_image.webp"
        alt="Signup Image"
        class="signup-image"
      />
    </div>
    <div class="col-md-5 col-12">
      <div class="bg-light p-4 rounded shadow-sm">
        <h2 class="mb-4">Create an account</h2>
        <p class="text-muted mb-4">Enter your details below</p>
        
        <%# Display all validation errors in an alert %>
        <% if (typeof errors !== 'undefined' && errors && errors.length > 0) { %>
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Please fix the following errors:</strong>
            <ul class="mb-0 mt-2">
              <% errors.forEach(error => { %>
                <li><%= error.msg %></li>
              <% }) %>
            </ul>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        <% } %>
        
        <form id="signupForm" action="/signup" method="POST">
          <div class="mb-3">
            <input
              type="text"
              class="form-control"
              id="firstname"
              name="firstName"
              placeholder="First Name"
              value="<%= typeof formData !== 'undefined' && formData ? (formData.firstName || '') : '' %>"
            />
             <div id="firstnameError" class="text-danger mt-2 alert alert-danger" style="display: none;"></div>
          </div>
          <div class="mb-3">
            <input
              type="text"
              class="form-control"
              id="lastname"
              name="lastName"
              placeholder="Last Name"
              value="<%= typeof formData !== 'undefined' && formData ? (formData.lastName || '') : '' %>"
            />
            <div id="lastnameError" class="text-danger mt-2 alert alert-danger" style="display: none;"></div>
          </div>
          <div class="mb-3">
            <input
              type="text"
              class="form-control"
              id="email"
              name="email"
              placeholder="Email"
              value="<%= typeof formData !== 'undefined' && formData ? (formData.email || '') : '' %>"
            />
            <div id="emailError" class="text-danger mt-2 alert alert-danger" style="display: none;"></div>
          </div>
          <div class="mb-3">
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                placeholder="Password"
              />
              <button type="button" id="togglePassword" class="btn btn-dark">
                <i class="fas fa-eye" id="eyeIcon"></i>
              </button>
            </div>
            <div id="passwordError" class="text-danger mt-2 alert alert-danger" style="display: none;"></div>
          </div>
          <button type="submit" class="btn btn-primary w-100 py-2 mb-3">
            Create Account
          </button>
          <!-- Google Sign-In Button -->
          <button
            type="button"
            class="btn btn-outline-secondary w-100 py-2"
            id="googleSignInButton"
            onclick="window.location.href='/auth/google';"
          >
            <i class="bi bi-google"></i> Sign Up with Google
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="/js/signUp-validation.js"></script>
<script src="/js/password-toggle.js"></script>